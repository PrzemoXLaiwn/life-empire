{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/lib/supabase/client.ts"],"sourcesContent":["// lib/supabase/client.ts\r\nimport { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  )\r\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,kVAAmB;AAI5B","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/lib/character-store.ts"],"sourcesContent":["'use client'\r\n\r\nimport { create } from 'zustand'\r\n\r\nexport interface Character {\r\n  id: string\r\n  userId: string\r\n  cityId: string | null\r\n  city?: {\r\n    id: string\r\n    name: string\r\n    country: string\r\n    description: string\r\n    incomeBonus: number      // DODAJ\r\n    crimeBonus: number       // DODAJ\r\n    trainingBonus: number    // DODAJ\r\n    businessBonus: number    // DODAJ\r\n    minLevel: number         // DODAJ\r\n    requiresCar: boolean     // DODAJ\r\n    requiresPlane: boolean   // DODAJ\r\n  } | null\r\n  \r\n  money: number\r\n  energy: number\r\n  maxEnergy: number\r\n  health: number\r\n  maxHealth: number\r\n  \r\n  level: number\r\n  xp: number\r\n  xpNeeded: number\r\n  age: number\r\n  ageInDays: number\r\n  \r\n  reputation: number\r\n  rank: number\r\n  \r\n  education: string | null\r\n  job: string | null\r\n  jobTitle: string | null\r\n  salary: number\r\n  \r\n  strength: number\r\n  defense: number\r\n  speed: number\r\n  dexterity: number\r\n  \r\n  crimesCommitted: number\r\n  jailTime: number\r\n  criminalReputation: number\r\n  \r\n  hasDriverLicense: boolean\r\n  hasCar: boolean\r\n  hasPlane: boolean\r\n  \r\n  lastEnergyRegen: Date\r\n  lastHealthRegen: Date\r\n  lastAgeIncrement: Date\r\n  createdAt: Date\r\n  updatedAt: Date\r\n}\r\n\r\ninterface CharacterState {\r\n  character: Character | null\r\n  isLoading: boolean\r\n  error: string | null\r\n  \r\n  // Actions\r\n  fetchCharacter: () => Promise<void>\r\n  updateCharacter: (updates: Partial<Character>) => void\r\n  refreshCharacter: () => Promise<void>\r\n  createCharacter: (userId: string, name: string) => Promise<void>\r\n}\r\n\r\nexport const useCharacterStore = create<CharacterState>((set, get) => ({\r\n  character: null,\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  fetchCharacter: async () => {\r\n    try {\r\n      set({ isLoading: true, error: null })\r\n      \r\n      // Dynamic import to avoid circular dependency\r\n      const { createClient } = await import('@/lib/supabase/client')\r\n      const supabase = createClient()\r\n      \r\n      // Get authenticated user\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      \r\n      if (!user) {\r\n        console.error('❌ No user authenticated')\r\n        set({ isLoading: false, error: 'Not authenticated' })\r\n        return\r\n      }\r\n\r\n      console.log('🔍 Fetching character for userId:', user.id)\r\n\r\n      const response = await fetch(`/api/character?userId=${user.id}`)\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Failed to fetch character: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      \r\n      if (!data.character) {\r\n        console.log('⚠️ No character found, needs to be created')\r\n        set({ isLoading: false, error: 'No character found' })\r\n        return\r\n      }\r\n\r\n      const character = data.character\r\n      \r\n      // Convert date strings to Date objects\r\n      character.lastEnergyRegen = new Date(character.lastEnergyRegen)\r\n      character.lastHealthRegen = new Date(character.lastHealthRegen)\r\n      character.lastAgeIncrement = new Date(character.lastAgeIncrement)\r\n      character.createdAt = new Date(character.createdAt)\r\n      character.updatedAt = new Date(character.updatedAt)\r\n      \r\n      console.log('✅ Character fetched:', character)\r\n      \r\n      set({ character, isLoading: false, error: null })\r\n    } catch (error) {\r\n      console.error('❌ Failed to fetch character:', error)\r\n      set({ \r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to fetch character'\r\n      })\r\n    }\r\n  },\r\n\r\n  createCharacter: async (userId: string, name: string) => {\r\n    try {\r\n      set({ isLoading: true, error: null })\r\n      \r\n      console.log('🎮 Creating character:', { userId, name })\r\n\r\n      const response = await fetch('/api/character', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId, name })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to create character: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const character = data.character\r\n      \r\n      // Convert date strings to Date objects\r\n      character.lastEnergyRegen = new Date(character.lastEnergyRegen)\r\n      character.lastHealthRegen = new Date(character.lastHealthRegen)\r\n      character.lastAgeIncrement = new Date(character.lastAgeIncrement)\r\n      character.createdAt = new Date(character.createdAt)\r\n      character.updatedAt = new Date(character.updatedAt)\r\n      \r\n      console.log('✅ Character created:', character)\r\n      \r\n      set({ character, isLoading: false, error: null })\r\n    } catch (error) {\r\n      console.error('❌ Failed to create character:', error)\r\n      set({ \r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to create character'\r\n      })\r\n    }\r\n  },\r\n\r\n  updateCharacter: (updates) => {\r\n    set((state) => ({\r\n      character: state.character ? { ...state.character, ...updates } : null\r\n    }))\r\n  },\r\n\r\n  refreshCharacter: async () => {\r\n    await get().fetchCharacter()\r\n  },\r\n}))"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/dashboard/Sidebar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { \r\n  LayoutDashboard, \r\n  User, \r\n  BarChart3,\r\n  Briefcase,\r\n  GraduationCap,\r\n  Building2,\r\n  Target,\r\n  Swords,\r\n  Users,\r\n  ShoppingBag,\r\n  Trophy,\r\n  Globe,\r\n  Home,\r\n  Car,\r\n  Warehouse,\r\n  TrendingUp,\r\n  Dumbbell,\r\n  Hospital,\r\n  Pill,\r\n  Shirt,\r\n  Plane,\r\n  MapPin,\r\n  UserPlus,\r\n  MessageSquare,\r\n  Mail,\r\n  Shield,\r\n  Zap,\r\n  BookOpen,\r\n  Hammer,\r\n  Factory,\r\n  DollarSign,\r\n  Package,\r\n  Store,\r\n  ChevronDown,\r\n  ChevronRight\r\n} from 'lucide-react'\r\nimport { useState } from 'react'\r\n\r\ninterface NavItem {\r\n  icon: any\r\n  label: string\r\n  href: string\r\n  badge?: string\r\n  locked?: boolean\r\n}\r\n\r\ninterface NavSection {\r\n  title: string\r\n  items: NavItem[]\r\n}\r\n\r\nexport function Sidebar() {\r\n  const pathname = usePathname()\r\n  const [expandedSections, setExpandedSections] = useState<string[]>(['MAIN'])\r\n\r\n  const toggleSection = (title: string) => {\r\n    setExpandedSections(prev => \r\n      prev.includes(title) \r\n        ? prev.filter(t => t !== title)\r\n        : [...prev, title]\r\n    )\r\n  }\r\n\r\n  const sections: NavSection[] = [\r\n    {\r\n      title: 'MAIN',\r\n      items: [\r\n        { icon: LayoutDashboard, label: 'Dashboard', href: '/dashboard' },\r\n        { icon: User, label: 'Profile', href: '/dashboard/profile' },\r\n        { icon: BarChart3, label: 'Stats', href: '/dashboard/stats' },\r\n        { icon: Mail, label: 'Messages', href: '/dashboard/messages', badge: '0' },\r\n        { icon: BookOpen, label: 'Events', href: '/dashboard/events' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'CITY',\r\n      items: [\r\n        { icon: MapPin, label: 'City', href: '/dashboard/city' },\r\n        { icon: Home, label: 'Home', href: '/dashboard/home' },\r\n        { icon: Store, label: 'Shops', href: '/dashboard/shops' },\r\n        { icon: Hospital, label: 'Hospital', href: '/dashboard/hospital' },\r\n        { icon: Dumbbell, label: 'Gym', href: '/dashboard/gym' },\r\n        { icon: Pill, label: 'Pharmacy', href: '/dashboard/pharmacy' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'CAREER',\r\n      items: [\r\n        { icon: Briefcase, label: 'Jobs', href: '/dashboard/jobs' },\r\n        { icon: GraduationCap, label: 'Education', href: '/dashboard/education' },\r\n        { icon: Building2, label: 'Properties', href: '/dashboard/properties' },\r\n        { icon: Factory, label: 'Businesses', href: '/dashboard/businesses' },\r\n        { icon: TrendingUp, label: 'Stocks', href: '/dashboard/stocks' },\r\n        { icon: DollarSign, label: 'Bank', href: '/dashboard/bank' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'CRIMINAL',\r\n      items: [\r\n        { icon: Target, label: 'Crimes', href: '/dashboard/crimes' },\r\n        { icon: Swords, label: 'Combat', href: '/dashboard/combat' },\r\n        { icon: Zap, label: 'Organized Crime', href: '/dashboard/organized-crime' },\r\n        { icon: Shield, label: 'Bounties', href: '/dashboard/bounties' },\r\n        { icon: Warehouse, label: 'Heists', href: '/dashboard/heists' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'ITEMS',\r\n      items: [\r\n        { icon: Package, label: 'Inventory', href: '/dashboard/inventory' },\r\n        { icon: Shirt, label: 'Wardrobe', href: '/dashboard/wardrobe' },\r\n        { icon: Car, label: 'Garage', href: '/dashboard/garage' },\r\n        { icon: Hammer, label: 'Weapons', href: '/dashboard/weapons' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'WORLD',\r\n      items: [\r\n        { icon: Car, label: 'Travel', href: '/dashboard/travel' },\r\n        { icon: Plane, label: 'Airport', href: '/dashboard/airport' },\r\n        { icon: Users, label: 'Gang', href: '/dashboard/gang' },\r\n        { icon: UserPlus, label: 'Faction', href: '/dashboard/faction' },\r\n        { icon: MessageSquare, label: 'Forums', href: '/dashboard/forums' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'MARKET',\r\n      items: [\r\n        { icon: ShoppingBag, label: 'Market', href: '/dashboard/market' },\r\n        { icon: TrendingUp, label: 'Trade', href: '/dashboard/trade' },\r\n        { icon: Trophy, label: 'Auction', href: '/dashboard/auction' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'SOCIAL',\r\n      items: [\r\n        { icon: Trophy, label: 'Leaderboard', href: '/dashboard/leaderboard' },\r\n        { icon: Users, label: 'Players', href: '/dashboard/players' },\r\n        { icon: Shield, label: 'Achievements', href: '/dashboard/achievements' },\r\n      ]\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <div className=\"w-64 bg-[#0f0f0f] border-r border-[#333] h-screen overflow-y-auto\">\r\n      {/* Logo */}\r\n      <div className=\"p-6 border-b border-[#333]\">\r\n        <h1 className=\"text-xl font-bold text-[#fff] uppercase tracking-wider\">\r\n          LIFE EMPIRE\r\n        </h1>\r\n        <p className=\"text-[10px] text-[#888] uppercase tracking-wider mt-1\">\r\n          Build Your Empire\r\n        </p>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"py-4\">\r\n        {sections.map((section) => {\r\n          const isExpanded = expandedSections.includes(section.title)\r\n          \r\n          return (\r\n            <div key={section.title} className=\"mb-2\">\r\n              {/* Section Header */}\r\n              <button\r\n                onClick={() => toggleSection(section.title)}\r\n                className=\"w-full px-6 py-2 flex items-center justify-between hover:bg-[#1a1a1a] transition-colors\"\r\n              >\r\n                <span className=\"text-[10px] font-bold text-[#888] uppercase tracking-wider\">\r\n                  {section.title}\r\n                </span>\r\n                {isExpanded ? (\r\n                  <ChevronDown className=\"w-3 h-3 text-[#888]\" />\r\n                ) : (\r\n                  <ChevronRight className=\"w-3 h-3 text-[#888]\" />\r\n                )}\r\n              </button>\r\n\r\n              {/* Section Items */}\r\n              {isExpanded && (\r\n                <div className=\"mt-1\">\r\n                  {section.items.map((item) => {\r\n                    const Icon = item.icon\r\n                    const isActive = pathname === item.href\r\n                    \r\n                    return (\r\n                      <Link\r\n                        key={item.href}\r\n                        href={item.href}\r\n                        className={`\r\n                          flex items-center gap-3 px-6 py-2.5 transition-colors relative\r\n                          ${isActive \r\n                            ? 'bg-[#1a1a1a] text-[#5cb85c] border-l-2 border-[#5cb85c]' \r\n                            : 'text-[#d0d0d0] hover:bg-[#1a1a1a] hover:text-[#fff] border-l-2 border-transparent'\r\n                          }\r\n                          ${item.locked ? 'opacity-50 cursor-not-allowed' : ''}\r\n                        `}\r\n                      >\r\n                        <Icon className=\"w-4 h-4\" />\r\n                        <span className=\"text-sm flex-1\">{item.label}</span>\r\n                        {item.badge && (\r\n                          <span className=\"text-[10px] bg-[#d9534f] text-white px-1.5 py-0.5 rounded\">\r\n                            {item.badge}\r\n                          </span>\r\n                        )}\r\n                        {item.locked && (\r\n                          <span className=\"text-[10px] text-[#666]\">🔒</span>\r\n                        )}\r\n                      </Link>\r\n                    )\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/dashboard/TopBar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useCharacterStore } from '@/lib/character-store'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Power } from 'lucide-react'\r\n\r\nexport function TopBar() {\r\n  const { character, isLoading } = useCharacterStore()\r\n  const [username, setUsername] = useState<string>('Player')\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    const getUsername = async () => {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      \r\n      if (user?.user_metadata?.username) {\r\n        setUsername(user.user_metadata.username)\r\n      } else {\r\n        setUsername(user?.email?.split('@')[0] || 'Player')\r\n      }\r\n    }\r\n    \r\n    getUsername()\r\n  }, [supabase])\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut()\r\n    router.push('/login')\r\n  }\r\n\r\n  if (isLoading || !character) {\r\n    return (\r\n      <div className=\"bg-[#0f0f0f] border-b border-[#333] px-6 py-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"h-6 w-32 bg-[#1a1a1a] animate-pulse\"></div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const stats = [\r\n    { \r\n      label: 'CASH', \r\n      value: `$${character.money.toLocaleString()}`, \r\n      color: 'text-success'\r\n    },\r\n    { \r\n      label: 'HP', \r\n      value: `${character.health}/${character.maxHealth}`, \r\n      color: 'text-success',\r\n      percent: (character.health / character.maxHealth) * 100\r\n    },\r\n    { \r\n      label: 'ENERGY', \r\n      value: `${character.energy}/${character.maxEnergy}`, \r\n      color: 'text-warning',\r\n      percent: (character.energy / character.maxEnergy) * 100\r\n    },\r\n    { \r\n      label: 'LVL', \r\n      value: character.level.toString(), \r\n      color: 'text-info'\r\n    },\r\n    { \r\n      label: 'REP', \r\n      value: character.reputation.toString(), \r\n      color: 'text-[#d0d0d0]'\r\n    }\r\n  ]\r\n\r\n  // Get city name and country flag\r\n  const getCityDisplay = () => {\r\n    if (!character.city) {\r\n      return 'NO CITY'\r\n    }\r\n    \r\n    const countryFlags: Record<string, string> = {\r\n      'USA': '🇺🇸',\r\n      'UK': '🇬🇧',\r\n      'Japan': '🇯🇵'\r\n    }\r\n    \r\n    const flag = countryFlags[character.city.country] || '🌍'\r\n    return `${flag} ${character.city.name}`\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-[#0f0f0f] border-b border-[#333] px-6 py-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* Stats */}\r\n        <div className=\"flex items-center gap-8\">\r\n          {stats.map((stat, index) => (\r\n            <div key={index} className=\"flex items-center gap-2\">\r\n              <div>\r\n                <p className=\"text-[10px] text-[#888] uppercase tracking-wider leading-tight\">\r\n                  {stat.label}\r\n                </p>\r\n                <p className={`text-sm font-bold ${stat.color}`}>\r\n                  {stat.value}\r\n                </p>\r\n                {stat.percent !== undefined && (\r\n                  <div className=\"w-16 h-[2px] bg-[#2a2a2a] mt-1\">\r\n                    <div \r\n                      className={`h-full ${stat.color === 'text-success' ? 'bg-[#5cb85c]' : 'bg-[#f0ad4e]'}`}\r\n                      style={{ width: `${stat.percent}%` }}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* User Info */}\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"text-right\">\r\n            <p className=\"text-sm font-bold text-[#fff] uppercase tracking-wider\">\r\n              {username}\r\n            </p>\r\n            <p className=\"text-[10px] text-[#888] uppercase tracking-wider\">\r\n              {getCityDisplay()}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"p-2 bg-[#1a1a1a] border border-[#333] hover:border-[#d9534f] hover:bg-[#d9534f]/10 transition-colors\"\r\n            title=\"Logout\"\r\n          >\r\n            <Power className=\"w-4 h-4 text-[#d9534f]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS;IACd,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,IAAA,kLAAiB;IAClD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,oWAAQ,EAAS;IACjD,MAAM,WAAW,IAAA,6KAAY;IAC7B,MAAM,SAAS,IAAA,kSAAS;IAExB,IAAA,qWAAS,EAAC;QACR,MAAM,cAAc;YAClB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YAEtD,IAAI,MAAM,eAAe,UAAU;gBACjC,YAAY,KAAK,aAAa,CAAC,QAAQ;YACzC,OAAO;gBACL,YAAY,MAAM,OAAO,MAAM,IAAI,CAAC,EAAE,IAAI;YAC5C;QACF;QAEA;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,eAAe;QACnB,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,aAAa,CAAC,WAAW;QAC3B,qBACE,iYAAC;YAAI,WAAU;sBACb,cAAA,iYAAC;gBAAI,WAAU;0BACb,cAAA,iYAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;IAIvB;IAEA,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,cAAc,IAAI;YAC7C,OAAO;QACT;QACA;YACE,OAAO;YACP,OAAO,GAAG,UAAU,MAAM,CAAC,CAAC,EAAE,UAAU,SAAS,EAAE;YACnD,OAAO;YACP,SAAS,AAAC,UAAU,MAAM,GAAG,UAAU,SAAS,GAAI;QACtD;QACA;YACE,OAAO;YACP,OAAO,GAAG,UAAU,MAAM,CAAC,CAAC,EAAE,UAAU,SAAS,EAAE;YACnD,OAAO;YACP,SAAS,AAAC,UAAU,MAAM,GAAG,UAAU,SAAS,GAAI;QACtD;QACA;YACE,OAAO;YACP,OAAO,UAAU,KAAK,CAAC,QAAQ;YAC/B,OAAO;QACT;QACA;YACE,OAAO;YACP,OAAO,UAAU,UAAU,CAAC,QAAQ;YACpC,OAAO;QACT;KACD;IAED,iCAAiC;IACjC,MAAM,iBAAiB;QACrB,IAAI,CAAC,UAAU,IAAI,EAAE;YACnB,OAAO;QACT;QAEA,MAAM,eAAuC;YAC3C,OAAO;YACP,MAAM;YACN,SAAS;QACX;QAEA,MAAM,OAAO,YAAY,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,IAAI;QACrD,OAAO,GAAG,KAAK,CAAC,EAAE,UAAU,IAAI,CAAC,IAAI,EAAE;IACzC;IAEA,qBACE,iYAAC;QAAI,WAAU;kBACb,cAAA,iYAAC;YAAI,WAAU;;8BAEb,iYAAC;oBAAI,WAAU;8BACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,iYAAC;4BAAgB,WAAU;sCACzB,cAAA,iYAAC;;kDACC,iYAAC;wCAAE,WAAU;kDACV,KAAK,KAAK;;;;;;kDAEb,iYAAC;wCAAE,WAAW,CAAC,kBAAkB,EAAE,KAAK,KAAK,EAAE;kDAC5C,KAAK,KAAK;;;;;;oCAEZ,KAAK,OAAO,KAAK,2BAChB,iYAAC;wCAAI,WAAU;kDACb,cAAA,iYAAC;4CACC,WAAW,CAAC,OAAO,EAAE,KAAK,KAAK,KAAK,iBAAiB,iBAAiB,gBAAgB;4CACtF,OAAO;gDAAE,OAAO,GAAG,KAAK,OAAO,CAAC,CAAC,CAAC;4CAAC;;;;;;;;;;;;;;;;;2BAZnC;;;;;;;;;;8BAsBd,iYAAC;oBAAI,WAAU;;sCACb,iYAAC;4BAAI,WAAU;;8CACb,iYAAC;oCAAE,WAAU;8CACV;;;;;;8CAEH,iYAAC;oCAAE,WAAU;8CACV;;;;;;;;;;;;sCAGL,iYAAC;4BACC,SAAS;4BACT,WAAU;4BACV,OAAM;sCAEN,cAAA,iYAAC,qUAAK;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM7B","debugId":null}},
    {"offset": {"line": 867, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/app/dashboard/layout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useCharacterStore } from '@/lib/character-store'\r\nimport { Sidebar } from '@/components/dashboard/Sidebar'\r\nimport { TopBar } from '@/components/dashboard/TopBar'\r\nimport type { User } from '@supabase/supabase-js'\r\n\r\nexport default function DashboardLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode\r\n}) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const router = useRouter()\r\n  const supabase = createClient()\r\n  const { fetchCharacter, character } = useCharacterStore()\r\n\r\n  useEffect(() => {\r\n    let mounted = true\r\n\r\n    const checkAuth = async () => {\r\n      try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        \r\n        if (!mounted) return\r\n        \r\n        if (!user) {\r\n          router.push('/login')\r\n          return\r\n        }\r\n\r\n        setUser(user)\r\n\r\n        // Fetch character tylko raz\r\n        if (!character) {\r\n          await fetchCharacter()\r\n          \r\n          // Check if character was created\r\n          setTimeout(async () => {\r\n            if (!mounted) return\r\n            \r\n            const currentState = useCharacterStore.getState()\r\n            \r\n            if (!currentState.character) {\r\n              console.log('🎮 Creating new character...')\r\n              \r\n              const response = await fetch('/api/character', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                  userId: user.id,\r\n                  name: 'Player'\r\n                })\r\n              })\r\n\r\n              if (response.ok) {\r\n                await fetchCharacter()\r\n              }\r\n            }\r\n            \r\n            if (mounted) {\r\n              setIsLoading(false)\r\n            }\r\n          }, 500)\r\n        } else {\r\n          setIsLoading(false)\r\n        }\r\n      } catch (error) {\r\n        console.error('Auth error:', error)\r\n        if (mounted) {\r\n          setIsLoading(false)\r\n        }\r\n      }\r\n    }\r\n\r\n    checkAuth()\r\n\r\n    // Auth state listener\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (!mounted) return\r\n        \r\n        if (event === 'SIGNED_OUT') {\r\n          router.push('/login')\r\n        } else if (event === 'SIGNED_IN' && session?.user) {\r\n          setUser(session.user)\r\n        }\r\n      }\r\n    )\r\n\r\n    return () => {\r\n      mounted = false\r\n      subscription.unsubscribe()\r\n    }\r\n  }, []) // TYLKO PUSTY ARRAY!\r\n\r\n  if (isLoading || !user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-slate-950\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-500 border-r-transparent mb-4\"></div>\r\n          <p className=\"text-slate-400\">Loading your empire...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!character) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-slate-950\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-500 border-r-transparent mb-4\"></div>\r\n          <p className=\"text-slate-400\">Setting up your character...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-slate-950\">\r\n      <Sidebar />\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <TopBar />\r\n        <main className=\"flex-1 overflow-y-auto bg-slate-900 p-6\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAUe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oWAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,oWAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,kSAAS;IACxB,MAAM,WAAW,IAAA,6KAAY;IAC7B,MAAM,EAAE,cAAc,EAAE,SAAS,EAAE,GAAG,IAAA,kLAAiB;IAEvD,IAAA,qWAAS,EAAC;QACR,IAAI,UAAU;QAEd,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBAEtD,IAAI,CAAC,SAAS;gBAEd,IAAI,CAAC,MAAM;oBACT,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,QAAQ;gBAER,4BAA4B;gBAC5B,IAAI,CAAC,WAAW;oBACd,MAAM;oBAEN,iCAAiC;oBACjC,WAAW;wBACT,IAAI,CAAC,SAAS;wBAEd,MAAM,eAAe,kLAAiB,CAAC,QAAQ;wBAE/C,IAAI,CAAC,aAAa,SAAS,EAAE;4BAC3B,QAAQ,GAAG,CAAC;4BAEZ,MAAM,WAAW,MAAM,MAAM,kBAAkB;gCAC7C,QAAQ;gCACR,SAAS;oCAAE,gBAAgB;gCAAmB;gCAC9C,MAAM,KAAK,SAAS,CAAC;oCACnB,QAAQ,KAAK,EAAE;oCACf,MAAM;gCACR;4BACF;4BAEA,IAAI,SAAS,EAAE,EAAE;gCACf,MAAM;4BACR;wBACF;wBAEA,IAAI,SAAS;4BACX,aAAa;wBACf;oBACF,GAAG;gBACL,OAAO;oBACL,aAAa;gBACf;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,eAAe;gBAC7B,IAAI,SAAS;oBACX,aAAa;gBACf;YACF;QACF;QAEA;QAEA,sBAAsB;QACtB,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAChE,OAAO,OAAO;YACZ,IAAI,CAAC,SAAS;YAEd,IAAI,UAAU,cAAc;gBAC1B,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,UAAU,eAAe,SAAS,MAAM;gBACjD,QAAQ,QAAQ,IAAI;YACtB;QACF;QAGF,OAAO;YACL,UAAU;YACV,aAAa,WAAW;QAC1B;IACF,GAAG,EAAE,GAAE,qBAAqB;IAE5B,IAAI,aAAa,CAAC,MAAM;QACtB,qBACE,iYAAC;YAAI,WAAU;sBACb,cAAA,iYAAC;gBAAI,WAAU;;kCACb,iYAAC;wBAAI,WAAU;;;;;;kCACf,iYAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;IAItC;IAEA,IAAI,CAAC,WAAW;QACd,qBACE,iYAAC;YAAI,WAAU;sBACb,cAAA,iYAAC;gBAAI,WAAU;;kCACb,iYAAC;wBAAI,WAAU;;;;;;kCACf,iYAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;IAItC;IAEA,qBACE,iYAAC;QAAI,WAAU;;0BACb,iYAAC,kLAAO;;;;;0BACR,iYAAC;gBAAI,WAAU;;kCACb,iYAAC,gLAAM;;;;;kCACP,iYAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX","debugId":null}}]
}