{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/lib/supabase/client.ts"],"sourcesContent":["// lib/supabase/client.ts\r\nimport { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  )\r\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,kVAAmB;AAI5B","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/lib/character-store.ts"],"sourcesContent":["'use client'\r\n\r\nimport { create } from 'zustand'\r\n\r\nexport interface Character {\r\n  id: string\r\n  userId: string\r\n  cityId: string | null\r\n  city?: {\r\n    id: string\r\n    name: string\r\n    country: string\r\n    description: string\r\n    incomeBonus: number      // DODAJ\r\n    crimeBonus: number       // DODAJ\r\n    trainingBonus: number    // DODAJ\r\n    businessBonus: number    // DODAJ\r\n    minLevel: number         // DODAJ\r\n    requiresCar: boolean     // DODAJ\r\n    requiresPlane: boolean   // DODAJ\r\n  } | null\r\n  \r\n  money: number\r\n  energy: number\r\n  maxEnergy: number\r\n  health: number\r\n  maxHealth: number\r\n  \r\n  level: number\r\n  xp: number\r\n  xpNeeded: number\r\n  age: number\r\n  ageInDays: number\r\n  \r\n  reputation: number\r\n  rank: number\r\n  \r\n  education: string | null\r\n  job: string | null\r\n  jobTitle: string | null\r\n  salary: number\r\n  \r\n  strength: number\r\n  defense: number\r\n  speed: number\r\n  dexterity: number\r\n  \r\n  crimesCommitted: number\r\n  jailTime: number\r\n  criminalReputation: number\r\n  \r\n  hasDriverLicense: boolean\r\n  hasCar: boolean\r\n  hasPlane: boolean\r\n  \r\n  lastEnergyRegen: Date\r\n  lastHealthRegen: Date\r\n  lastAgeIncrement: Date\r\n  createdAt: Date\r\n  updatedAt: Date\r\n}\r\n\r\ninterface CharacterState {\r\n  character: Character | null\r\n  isLoading: boolean\r\n  error: string | null\r\n  \r\n  // Actions\r\n  fetchCharacter: () => Promise<void>\r\n  updateCharacter: (updates: Partial<Character>) => void\r\n  refreshCharacter: () => Promise<void>\r\n  createCharacter: (userId: string, name: string) => Promise<void>\r\n}\r\n\r\nexport const useCharacterStore = create<CharacterState>((set, get) => ({\r\n  character: null,\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  fetchCharacter: async () => {\r\n    try {\r\n      set({ isLoading: true, error: null })\r\n      \r\n      // Dynamic import to avoid circular dependency\r\n      const { createClient } = await import('@/lib/supabase/client')\r\n      const supabase = createClient()\r\n      \r\n      // Get authenticated user\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      \r\n      if (!user) {\r\n        console.error('❌ No user authenticated')\r\n        set({ isLoading: false, error: 'Not authenticated' })\r\n        return\r\n      }\r\n\r\n      console.log('🔍 Fetching character for userId:', user.id)\r\n\r\n      const response = await fetch(`/api/character?userId=${user.id}`)\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Failed to fetch character: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      \r\n      if (!data.character) {\r\n        console.log('⚠️ No character found, needs to be created')\r\n        set({ isLoading: false, error: 'No character found' })\r\n        return\r\n      }\r\n\r\n      const character = data.character\r\n      \r\n      // Convert date strings to Date objects\r\n      character.lastEnergyRegen = new Date(character.lastEnergyRegen)\r\n      character.lastHealthRegen = new Date(character.lastHealthRegen)\r\n      character.lastAgeIncrement = new Date(character.lastAgeIncrement)\r\n      character.createdAt = new Date(character.createdAt)\r\n      character.updatedAt = new Date(character.updatedAt)\r\n      \r\n      console.log('✅ Character fetched:', character)\r\n      \r\n      set({ character, isLoading: false, error: null })\r\n    } catch (error) {\r\n      console.error('❌ Failed to fetch character:', error)\r\n      set({ \r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to fetch character'\r\n      })\r\n    }\r\n  },\r\n\r\n  createCharacter: async (userId: string, name: string) => {\r\n    try {\r\n      set({ isLoading: true, error: null })\r\n      \r\n      console.log('🎮 Creating character:', { userId, name })\r\n\r\n      const response = await fetch('/api/character', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId, name })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to create character: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const character = data.character\r\n      \r\n      // Convert date strings to Date objects\r\n      character.lastEnergyRegen = new Date(character.lastEnergyRegen)\r\n      character.lastHealthRegen = new Date(character.lastHealthRegen)\r\n      character.lastAgeIncrement = new Date(character.lastAgeIncrement)\r\n      character.createdAt = new Date(character.createdAt)\r\n      character.updatedAt = new Date(character.updatedAt)\r\n      \r\n      console.log('✅ Character created:', character)\r\n      \r\n      set({ character, isLoading: false, error: null })\r\n    } catch (error) {\r\n      console.error('❌ Failed to create character:', error)\r\n      set({ \r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to create character'\r\n      })\r\n    }\r\n  },\r\n\r\n  updateCharacter: (updates) => {\r\n    set((state) => ({\r\n      character: state.character ? { ...state.character, ...updates } : null\r\n    }))\r\n  },\r\n\r\n  refreshCharacter: async () => {\r\n    await get().fetchCharacter()\r\n  },\r\n}))"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/dashboard/Sidebar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { \r\n  LayoutDashboard, \r\n  User, \r\n  BarChart3,\r\n  Briefcase,\r\n  GraduationCap,\r\n  Building2,\r\n  Target,\r\n  Swords,\r\n  Users,\r\n  ShoppingBag,\r\n  Trophy,\r\n  Globe,\r\n  Home,\r\n  Car,\r\n  Warehouse,\r\n  TrendingUp,\r\n  Dumbbell,\r\n  Hospital,\r\n  Pill,\r\n  Shirt,\r\n  Plane,\r\n  MapPin,\r\n  UserPlus,\r\n  MessageSquare,\r\n  Mail,\r\n  Shield,\r\n  Zap,\r\n  BookOpen,\r\n  Hammer,\r\n  Factory,\r\n  DollarSign,\r\n  Package,\r\n  Store,\r\n  ChevronDown,\r\n  ChevronRight\r\n} from 'lucide-react'\r\nimport { useState } from 'react'\r\n\r\ninterface NavItem {\r\n  icon: any\r\n  label: string\r\n  href: string\r\n  badge?: string\r\n  locked?: boolean\r\n}\r\n\r\ninterface NavSection {\r\n  title: string\r\n  items: NavItem[]\r\n}\r\n\r\nexport function Sidebar() {\r\n  const pathname = usePathname()\r\n  const [expandedSections, setExpandedSections] = useState<string[]>(['MAIN'])\r\n\r\n  const toggleSection = (title: string) => {\r\n    setExpandedSections(prev => \r\n      prev.includes(title) \r\n        ? prev.filter(t => t !== title)\r\n        : [...prev, title]\r\n    )\r\n  }\r\n\r\n  const sections: NavSection[] = [\r\n    {\r\n      title: 'MAIN',\r\n      items: [\r\n        { icon: LayoutDashboard, label: 'Dashboard', href: '/dashboard' },\r\n        { icon: User, label: 'Profile', href: '/dashboard/profile' },\r\n        { icon: BarChart3, label: 'Stats', href: '/dashboard/stats' },\r\n        { icon: Mail, label: 'Messages', href: '/dashboard/messages', badge: '0' },\r\n        { icon: BookOpen, label: 'Events', href: '/dashboard/events' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'CITY',\r\n      items: [\r\n        { icon: MapPin, label: 'City', href: '/dashboard/city' },\r\n        { icon: Home, label: 'Home', href: '/dashboard/home' },\r\n        { icon: Store, label: 'Shops', href: '/dashboard/shops' },\r\n        { icon: Hospital, label: 'Hospital', href: '/dashboard/hospital' },\r\n        { icon: Dumbbell, label: 'Gym', href: '/dashboard/gym' },\r\n        { icon: Pill, label: 'Pharmacy', href: '/dashboard/pharmacy' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'CAREER',\r\n      items: [\r\n        { icon: Briefcase, label: 'Jobs', href: '/dashboard/jobs' },\r\n        { icon: GraduationCap, label: 'Education', href: '/dashboard/education' },\r\n        { icon: Building2, label: 'Properties', href: '/dashboard/properties' },\r\n        { icon: Factory, label: 'Businesses', href: '/dashboard/businesses' },\r\n        { icon: TrendingUp, label: 'Stocks', href: '/dashboard/stocks' },\r\n        { icon: DollarSign, label: 'Bank', href: '/dashboard/bank' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'CRIMINAL',\r\n      items: [\r\n        { icon: Target, label: 'Crimes', href: '/dashboard/crimes' },\r\n        { icon: Swords, label: 'Combat', href: '/dashboard/combat' },\r\n        { icon: Zap, label: 'Organized Crime', href: '/dashboard/organized-crime' },\r\n        { icon: Shield, label: 'Bounties', href: '/dashboard/bounties' },\r\n        { icon: Warehouse, label: 'Heists', href: '/dashboard/heists' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'ITEMS',\r\n      items: [\r\n        { icon: Package, label: 'Inventory', href: '/dashboard/inventory' },\r\n        { icon: Shirt, label: 'Wardrobe', href: '/dashboard/wardrobe' },\r\n        { icon: Car, label: 'Garage', href: '/dashboard/garage' },\r\n        { icon: Hammer, label: 'Weapons', href: '/dashboard/weapons' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'WORLD',\r\n      items: [\r\n        { icon: Car, label: 'Travel', href: '/dashboard/travel' },\r\n        { icon: Plane, label: 'Airport', href: '/dashboard/airport' },\r\n        { icon: Users, label: 'Gang', href: '/dashboard/gang' },\r\n        { icon: UserPlus, label: 'Faction', href: '/dashboard/faction' },\r\n        { icon: MessageSquare, label: 'Forums', href: '/dashboard/forums' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'MARKET',\r\n      items: [\r\n        { icon: ShoppingBag, label: 'Market', href: '/dashboard/market' },\r\n        { icon: TrendingUp, label: 'Trade', href: '/dashboard/trade' },\r\n        { icon: Trophy, label: 'Auction', href: '/dashboard/auction' },\r\n      ]\r\n    },\r\n    {\r\n      title: 'SOCIAL',\r\n      items: [\r\n        { icon: Trophy, label: 'Leaderboard', href: '/dashboard/leaderboard' },\r\n        { icon: Users, label: 'Players', href: '/dashboard/players' },\r\n        { icon: Shield, label: 'Achievements', href: '/dashboard/achievements' },\r\n      ]\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <div className=\"w-64 bg-[#0f0f0f] border-r border-[#333] h-screen overflow-y-auto\">\r\n      {/* Logo */}\r\n      <div className=\"p-6 border-b border-[#333]\">\r\n        <h1 className=\"text-xl font-bold text-[#fff] uppercase tracking-wider\">\r\n          LIFE EMPIRE\r\n        </h1>\r\n        <p className=\"text-[10px] text-[#888] uppercase tracking-wider mt-1\">\r\n          Build Your Empire\r\n        </p>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"py-4\">\r\n        {sections.map((section) => {\r\n          const isExpanded = expandedSections.includes(section.title)\r\n          \r\n          return (\r\n            <div key={section.title} className=\"mb-2\">\r\n              {/* Section Header */}\r\n              <button\r\n                onClick={() => toggleSection(section.title)}\r\n                className=\"w-full px-6 py-2 flex items-center justify-between hover:bg-[#1a1a1a] transition-colors\"\r\n              >\r\n                <span className=\"text-[10px] font-bold text-[#888] uppercase tracking-wider\">\r\n                  {section.title}\r\n                </span>\r\n                {isExpanded ? (\r\n                  <ChevronDown className=\"w-3 h-3 text-[#888]\" />\r\n                ) : (\r\n                  <ChevronRight className=\"w-3 h-3 text-[#888]\" />\r\n                )}\r\n              </button>\r\n\r\n              {/* Section Items */}\r\n              {isExpanded && (\r\n                <div className=\"mt-1\">\r\n                  {section.items.map((item) => {\r\n                    const Icon = item.icon\r\n                    const isActive = pathname === item.href\r\n                    \r\n                    return (\r\n                      <Link\r\n                        key={item.href}\r\n                        href={item.href}\r\n                        className={`\r\n                          flex items-center gap-3 px-6 py-2.5 transition-colors relative\r\n                          ${isActive \r\n                            ? 'bg-[#1a1a1a] text-[#5cb85c] border-l-2 border-[#5cb85c]' \r\n                            : 'text-[#d0d0d0] hover:bg-[#1a1a1a] hover:text-[#fff] border-l-2 border-transparent'\r\n                          }\r\n                          ${item.locked ? 'opacity-50 cursor-not-allowed' : ''}\r\n                        `}\r\n                      >\r\n                        <Icon className=\"w-4 h-4\" />\r\n                        <span className=\"text-sm flex-1\">{item.label}</span>\r\n                        {item.badge && (\r\n                          <span className=\"text-[10px] bg-[#d9534f] text-white px-1.5 py-0.5 rounded\">\r\n                            {item.badge}\r\n                          </span>\r\n                        )}\r\n                        {item.locked && (\r\n                          <span className=\"text-[10px] text-[#666]\">🔒</span>\r\n                        )}\r\n                      </Link>\r\n                    )\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/dashboard/TopBar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useCharacterStore } from '@/lib/character-store'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Power, Crown, Zap, Heart, DollarSign, TrendingUp } from 'lucide-react'\r\n\r\nexport function TopBar() {\r\n  const { character, isLoading } = useCharacterStore()\r\n  const [username, setUsername] = useState<string>('Player')\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    const getUsername = async () => {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      \r\n      if (user?.user_metadata?.username) {\r\n        setUsername(user.user_metadata.username)\r\n      } else {\r\n        setUsername(user?.email?.split('@')[0] || 'Player')\r\n      }\r\n    }\r\n    \r\n    getUsername()\r\n  }, [supabase])\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut()\r\n    router.push('/login')\r\n  }\r\n\r\n  if (isLoading || !character) {\r\n    return (\r\n      <div className=\"bg-[#0f0f0f] border-b border-[#333] px-4 md:px-6 py-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"h-10 w-48 bg-[#1a1a1a] animate-pulse rounded\"></div>\r\n          <div className=\"h-10 w-64 bg-[#1a1a1a] animate-pulse rounded\"></div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Get city name and country flag\r\n  const getCityDisplay = () => {\r\n    if (!character.city) {\r\n      return { flag: '🌍', name: 'No City' }\r\n    }\r\n    \r\n    const countryFlags: Record<string, string> = {\r\n      'USA': '🇺🇸',\r\n      'UK': '🇬🇧',\r\n      'Japan': '🇯🇵'\r\n    }\r\n    \r\n    const flag = countryFlags[character.city.country] || '🌍'\r\n    return { flag, name: character.city.name }\r\n  }\r\n\r\n  const city = getCityDisplay()\r\n  const healthPercent = (character.health / character.maxHealth) * 100\r\n  const energyPercent = (character.energy / character.maxEnergy) * 100\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-[#0f0f0f] via-[#1a1a1a] to-[#0f0f0f] border-b border-[#333] shadow-lg\">\r\n      <div className=\"px-4 md:px-6 py-3\">\r\n        <div className=\"flex items-center justify-between gap-4 flex-wrap lg:flex-nowrap\">\r\n          {/* Left: User Info */}\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Avatar with Level Badge */}\r\n            <div className=\"relative\">\r\n              <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-[#5cb85c] to-[#4a9d4a] flex items-center justify-center border-2 border-[#5cb85c] shadow-lg shadow-[#5cb85c]/20\">\r\n                <Crown className=\"w-6 h-6 text-white\" />\r\n              </div>\r\n              {/* Level Badge */}\r\n              <div className=\"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-[#f0ad4e] border-2 border-[#0f0f0f] flex items-center justify-center\">\r\n                <span className=\"text-[10px] font-bold text-white\">{character.level}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Username & Location */}\r\n            <div>\r\n              <p className=\"text-base font-bold text-[#fff] uppercase tracking-wider leading-tight\">\r\n                {username}\r\n              </p>\r\n              <p className=\"text-[10px] text-[#888] uppercase tracking-wider flex items-center gap-1\">\r\n                <span>{city.flag}</span>\r\n                <span>{city.name}</span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Center: Stats */}\r\n          <div className=\"flex items-center gap-4 lg:gap-6 flex-wrap lg:flex-nowrap\">\r\n            {/* Cash */}\r\n            <div className=\"flex items-center gap-2 bg-[#1a1a1a] border border-[#333] px-3 py-2 rounded\">\r\n              <DollarSign className=\"w-4 h-4 text-[#5cb85c]\" />\r\n              <div>\r\n                <p className=\"text-[9px] text-[#888] uppercase tracking-wider leading-tight\">Cash</p>\r\n                <p className=\"text-sm font-bold text-[#5cb85c]\">\r\n                  ${character.money.toLocaleString()}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Health */}\r\n            <div className=\"flex items-center gap-2 bg-[#1a1a1a] border border-[#333] px-3 py-2 rounded min-w-[120px]\">\r\n              <Heart className=\"w-4 h-4 text-[#d9534f]\" />\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <p className=\"text-[9px] text-[#888] uppercase tracking-wider\">Health</p>\r\n                  <span className=\"text-[10px] font-bold text-[#d9534f]\">\r\n                    {character.health}/{character.maxHealth}\r\n                  </span>\r\n                </div>\r\n                <div className=\"w-full h-1.5 bg-[#2a2a2a] rounded-full overflow-hidden\">\r\n                  <div \r\n                    className=\"h-full bg-gradient-to-r from-[#d9534f] to-[#c9302c] transition-all duration-300\"\r\n                    style={{ width: `${healthPercent}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Energy */}\r\n            <div className=\"flex items-center gap-2 bg-[#1a1a1a] border border-[#333] px-3 py-2 rounded min-w-[120px]\">\r\n              <Zap className=\"w-4 h-4 text-[#f0ad4e]\" />\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <p className=\"text-[9px] text-[#888] uppercase tracking-wider\">Energy</p>\r\n                  <span className=\"text-[10px] font-bold text-[#f0ad4e]\">\r\n                    {character.energy}/{character.maxEnergy}\r\n                  </span>\r\n                </div>\r\n                <div className=\"w-full h-1.5 bg-[#2a2a2a] rounded-full overflow-hidden\">\r\n                  <div \r\n                    className=\"h-full bg-gradient-to-r from-[#f0ad4e] to-[#ec971f] transition-all duration-300\"\r\n                    style={{ width: `${energyPercent}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Reputation */}\r\n            <div className=\"flex items-center gap-2 bg-[#1a1a1a] border border-[#333] px-3 py-2 rounded\">\r\n              <TrendingUp className=\"w-4 h-4 text-[#5bc0de]\" />\r\n              <div>\r\n                <p className=\"text-[9px] text-[#888] uppercase tracking-wider leading-tight\">Rep</p>\r\n                <p className=\"text-sm font-bold text-[#5bc0de]\">\r\n                  {character.reputation.toLocaleString()}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right: Logout */}\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"p-2.5 bg-[#1a1a1a] border border-[#333] hover:border-[#d9534f] hover:bg-[#d9534f]/10 transition-all rounded group ml-auto\"\r\n            title=\"Logout\"\r\n          >\r\n            <Power className=\"w-5 h-5 text-[#d9534f] group-hover:scale-110 transition-transform\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Stats - Compact Version */}\r\n      <div className=\"lg:hidden border-t border-[#333] px-4 py-2 bg-[#0f0f0f]\">\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          {/* Cash & Rep */}\r\n          <div className=\"flex items-center gap-2 bg-[#1a1a1a] px-2 py-1.5 rounded text-xs\">\r\n            <DollarSign className=\"w-3 h-3 text-[#5cb85c]\" />\r\n            <span className=\"text-[#5cb85c] font-bold\">${character.money.toLocaleString()}</span>\r\n            <span className=\"text-[#666] mx-1\">•</span>\r\n            <TrendingUp className=\"w-3 h-3 text-[#5bc0de]\" />\r\n            <span className=\"text-[#5bc0de] font-bold\">{character.reputation}</span>\r\n          </div>\r\n\r\n          {/* Level Badge */}\r\n          <div className=\"flex items-center justify-center gap-2 bg-[#1a1a1a] px-2 py-1.5 rounded\">\r\n            <Crown className=\"w-3 h-3 text-[#f0ad4e]\" />\r\n            <span className=\"text-[10px] text-[#888] uppercase\">Level</span>\r\n            <span className=\"text-xs font-bold text-[#f0ad4e]\">{character.level}</span>\r\n          </div>\r\n\r\n          {/* Health Bar */}\r\n          <div className=\"bg-[#1a1a1a] px-2 py-1.5 rounded\">\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <div className=\"flex items-center gap-1\">\r\n                <Heart className=\"w-3 h-3 text-[#d9534f]\" />\r\n                <span className=\"text-[9px] text-[#888] uppercase\">HP</span>\r\n              </div>\r\n              <span className=\"text-[9px] font-bold text-[#d9534f]\">\r\n                {character.health}/{character.maxHealth}\r\n              </span>\r\n            </div>\r\n            <div className=\"h-1.5 bg-[#2a2a2a] rounded-full overflow-hidden\">\r\n              <div \r\n                className=\"h-full bg-[#d9534f]\"\r\n                style={{ width: `${healthPercent}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Energy Bar */}\r\n          <div className=\"bg-[#1a1a1a] px-2 py-1.5 rounded\">\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <div className=\"flex items-center gap-1\">\r\n                <Zap className=\"w-3 h-3 text-[#f0ad4e]\" />\r\n                <span className=\"text-[9px] text-[#888] uppercase\">Energy</span>\r\n              </div>\r\n              <span className=\"text-[9px] font-bold text-[#f0ad4e]\">\r\n                {character.energy}/{character.maxEnergy}\r\n              </span>\r\n            </div>\r\n            <div className=\"h-1.5 bg-[#2a2a2a] rounded-full overflow-hidden\">\r\n              <div \r\n                className=\"h-full bg-[#f0ad4e]\"\r\n                style={{ width: `${energyPercent}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1341, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/ui/Avatar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Crown, Skull, Flame, Star, Diamond, Rocket, Bot, Swords, Ship, Users } from 'lucide-react'\r\nimport Image from 'next/image'\r\n\r\ninterface AvatarProps {\r\n  icon: string\r\n  customUrl?: string | null\r\n  size?: 'sm' | 'md' | 'lg' | 'xl'\r\n  className?: string\r\n}\r\n\r\nexport function Avatar({ icon, customUrl, size = 'md', className = '' }: AvatarProps) {\r\n  const icons: Record<string, any> = {\r\n    crown: Crown,\r\n    skull: Skull,\r\n    fire: Flame,\r\n    star: Star,\r\n    diamond: Diamond,\r\n    rocket: Rocket,\r\n    robot: Bot,\r\n    ninja: Swords,\r\n    pirate: Ship,\r\n    alien: Users\r\n  }\r\n\r\n  const sizes = {\r\n    sm: { container: 'w-8 h-8', icon: 'w-4 h-4' },\r\n    md: { container: 'w-12 h-12', icon: 'w-6 h-6' },\r\n    lg: { container: 'w-16 h-16', icon: 'w-8 h-8' },\r\n    xl: { container: 'w-24 h-24', icon: 'w-12 h-12' }\r\n  }\r\n\r\n  // Custom avatar\r\n  if (icon === 'custom' && customUrl) {\r\n    return (\r\n      <div className={`${sizes[size].container} rounded-full overflow-hidden border-2 border-[#5cb85c] shadow-lg ${className}`}>\r\n        <Image \r\n          src={customUrl} \r\n          alt=\"Avatar\" \r\n          width={parseInt(sizes[size].container.split('w-')[1]?.split(' ')[0] || '12') * 4}\r\n          height={parseInt(sizes[size].container.split('w-')[1]?.split(' ')[0] || '12') * 4}\r\n          className=\"w-full h-full object-cover\"\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Icon avatar\r\n  const Icon = icons[icon] || Crown\r\n\r\n  return (\r\n    <div className={`${sizes[size].container} rounded-full bg-gradient-to-br from-[#5cb85c] to-[#4a9d4a] flex items-center justify-center border-2 border-[#5cb85c] shadow-lg ${className}`}>\r\n      <Icon className={`${sizes[size].icon} text-white`} />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAYO,SAAS,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,IAAI,EAAE,YAAY,EAAE,EAAe;IAClF,MAAM,QAA6B;QACjC,OAAO,qUAAK;QACZ,OAAO,qUAAK;QACZ,MAAM,qUAAK;QACX,MAAM,kUAAI;QACV,SAAS,2UAAO;QAChB,QAAQ,wUAAM;QACd,OAAO,+TAAG;QACV,OAAO,wUAAM;QACb,QAAQ,kUAAI;QACZ,OAAO,qUAAK;IACd;IAEA,MAAM,QAAQ;QACZ,IAAI;YAAE,WAAW;YAAW,MAAM;QAAU;QAC5C,IAAI;YAAE,WAAW;YAAa,MAAM;QAAU;QAC9C,IAAI;YAAE,WAAW;YAAa,MAAM;QAAU;QAC9C,IAAI;YAAE,WAAW;YAAa,MAAM;QAAY;IAClD;IAEA,gBAAgB;IAChB,IAAI,SAAS,YAAY,WAAW;QAClC,qBACE,iYAAC;YAAI,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,kEAAkE,EAAE,WAAW;sBACtH,cAAA,iYAAC,2RAAK;gBACJ,KAAK;gBACL,KAAI;gBACJ,OAAO,SAAS,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI,QAAQ;gBAC/E,QAAQ,SAAS,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI,QAAQ;gBAChF,WAAU;;;;;;;;;;;IAIlB;IAEA,cAAc;IACd,MAAM,OAAO,KAAK,CAAC,KAAK,IAAI,qUAAK;IAEjC,qBACE,iYAAC;QAAI,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,iIAAiI,EAAE,WAAW;kBACrL,cAAA,iYAAC;YAAK,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;;;;;;;;;;;AAGvD","debugId":null}},
    {"offset": {"line": 1434, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/dashboard/FloatingChat.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { MessageSquare, X, Minus } from 'lucide-react'\r\nimport { Avatar } from '@/components/ui/Avatar'\r\n\r\ninterface ChatMessage {\r\n  id: string\r\n  username: string\r\n  avatar: string\r\n  message: string\r\n  createdAt: string\r\n}\r\n\r\nexport function FloatingChat() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [isMinimized, setIsMinimized] = useState(false)\r\n  const [messages, setMessages] = useState<ChatMessage[]>([])\r\n  const [newMessage, setNewMessage] = useState('')\r\n  const [username, setUsername] = useState('Player')\r\n  const supabase = createClient()\r\n\r\n  useEffect(() => {\r\n    loadUsername()\r\n    if (isOpen && !isMinimized) {\r\n      loadChat()\r\n      const interval = setInterval(loadChat, 3000)\r\n      return () => clearInterval(interval)\r\n    }\r\n  }, [isOpen, isMinimized])\r\n\r\n  const loadUsername = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (user?.user_metadata?.username) {\r\n      setUsername(user.user_metadata.username)\r\n    } else {\r\n      setUsername(user?.email?.split('@')[0] || 'Player')\r\n    }\r\n  }\r\n\r\n  const loadChat = async () => {\r\n    try {\r\n      const response = await fetch('/api/chat')\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setMessages(data.messages)\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load chat:', error)\r\n    }\r\n  }\r\n\r\n  const sendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (!newMessage.trim()) return\r\n\r\n    try {\r\n      const response = await fetch('/api/chat', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message: newMessage })\r\n      })\r\n\r\n      if (response.ok) {\r\n        setNewMessage('')\r\n        loadChat()\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to send message:', error)\r\n    }\r\n  }\r\n\r\n  const formatTime = (timestamp: string) => {\r\n    const now = new Date()\r\n    const eventTime = new Date(timestamp)\r\n    const diffMs = now.getTime() - eventTime.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    \r\n    if (diffMins < 1) return 'now'\r\n    if (diffMins < 60) return `${diffMins}m`\r\n    const diffHours = Math.floor(diffMins / 60)\r\n    if (diffHours < 24) return `${diffHours}h`\r\n    return `${Math.floor(diffHours / 24)}d`\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Floating Button */}\r\n      {!isOpen && (\r\n        <button\r\n          onClick={() => setIsOpen(true)}\r\n          className=\"fixed bottom-6 right-6 z-50 p-4 bg-[#5cb85c] hover:bg-[#4a9d4a] text-white rounded-full shadow-lg transition-all hover:scale-110\"\r\n        >\r\n          <MessageSquare className=\"w-6 h-6\" />\r\n          {messages.length > 0 && (\r\n            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-[#d9534f] rounded-full text-[10px] font-bold flex items-center justify-center\">\r\n              {messages.length > 99 ? '99+' : messages.length}\r\n            </span>\r\n          )}\r\n        </button>\r\n      )}\r\n\r\n      {/* Chat Window */}\r\n      {isOpen && (\r\n        <div className={`fixed bottom-6 right-6 z-50 w-full md:w-96 ${isMinimized ? 'h-14' : 'h-[500px]'} bg-[#0f0f0f] border border-[#333] shadow-2xl flex flex-col transition-all rounded-lg overflow-hidden`}>\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-3 bg-[#1a1a1a] border-b border-[#333]\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <MessageSquare className=\"w-4 h-4 text-success\" />\r\n              <span className=\"text-sm font-bold text-[#fff] uppercase tracking-wider\">\r\n                Global Chat\r\n              </span>\r\n              <span className=\"text-[10px] text-success\">● {messages.length}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                onClick={() => setIsMinimized(!isMinimized)}\r\n                className=\"p-1 hover:bg-[#2a2a2a] rounded transition-colors\"\r\n              >\r\n                <Minus className=\"w-4 h-4 text-[#888]\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"p-1 hover:bg-[#2a2a2a] rounded transition-colors\"\r\n              >\r\n                <X className=\"w-4 h-4 text-[#888]\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Messages */}\r\n          {!isMinimized && (\r\n            <>\r\n              <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\r\n                {messages.length === 0 ? (\r\n                  <p className=\"text-[#888] text-xs text-center py-8\">\r\n                    💬 No messages yet. Start chatting!\r\n                  </p>\r\n                ) : (\r\n                  messages.map((msg) => (\r\n                    <div\r\n                      key={msg.id}\r\n                      className=\"flex items-start gap-2 p-2 bg-[#1a1a1a] border border-[#2a2a2a] hover:border-[#333] transition-colors rounded\"\r\n                    >\r\n                      <Avatar icon={msg.avatar || 'crown'} size=\"sm\" />\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-start justify-between mb-1\">\r\n                          <span className=\"text-[10px] font-bold text-success\">\r\n                            {msg.username}\r\n                          </span>\r\n                          <span className=\"text-[8px] text-[#666]\">\r\n                            {formatTime(msg.createdAt)}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-[#d0d0d0] break-words\">{msg.message}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n\r\n              {/* Input */}\r\n              <form onSubmit={sendMessage} className=\"p-3 bg-[#1a1a1a] border-t border-[#333]\">\r\n                <div className=\"flex gap-2\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newMessage}\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    placeholder=\"Type a message...\"\r\n                    maxLength={200}\r\n                    className=\"flex-1 px-3 py-2 bg-[#0f0f0f] border border-[#333] text-[#d0d0d0] text-xs focus:outline-none focus:border-[#5cb85c] rounded\"\r\n                  />\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={!newMessage.trim()}\r\n                    className=\"px-4 py-2 bg-[#5cb85c] hover:bg-[#4a9d4a] text-white text-xs font-bold uppercase tracking-wider disabled:opacity-50 disabled:cursor-not-allowed rounded transition-colors\"\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1762, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/components/dashboard/FloatingFeed.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { TrendingUp, X, Minus } from 'lucide-react'\r\n\r\ninterface GameEvent {\r\n  id: string\r\n  type: string\r\n  message: string\r\n  userId: string | null\r\n  username?: string\r\n  createdAt: string\r\n}\r\n\r\nexport function FloatingFeed() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [isMinimized, setIsMinimized] = useState(false)\r\n  const [events, setEvents] = useState<GameEvent[]>([])\r\n\r\n  useEffect(() => {\r\n    if (isOpen && !isMinimized) {\r\n      loadEvents()\r\n      const interval = setInterval(loadEvents, 5000)\r\n      return () => clearInterval(interval)\r\n    }\r\n  }, [isOpen, isMinimized])\r\n\r\n  const loadEvents = async () => {\r\n    try {\r\n      const response = await fetch('/api/events')\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setEvents(data.events.slice(0, 20))\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load events:', error)\r\n    }\r\n  }\r\n\r\n  const getEventIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'crime': return '🔫'\r\n      case 'travel': return '✈️'\r\n      case 'business': return '💼'\r\n      case 'level_up': return '⬆️'\r\n      case 'gang': return '👥'\r\n      default: return '📰'\r\n    }\r\n  }\r\n\r\n  const formatTime = (timestamp: string) => {\r\n    const now = new Date()\r\n    const eventTime = new Date(timestamp)\r\n    const diffMs = now.getTime() - eventTime.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    \r\n    if (diffMins < 1) return 'now'\r\n    if (diffMins < 60) return `${diffMins}m`\r\n    const diffHours = Math.floor(diffMins / 60)\r\n    if (diffHours < 24) return `${diffHours}h`\r\n    return `${Math.floor(diffHours / 24)}d`\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Floating Button */}\r\n      {!isOpen && (\r\n        <button\r\n          onClick={() => setIsOpen(true)}\r\n          className=\"fixed bottom-24 right-6 z-50 p-4 bg-[#f0ad4e] hover:bg-[#ec971f] text-white rounded-full shadow-lg transition-all hover:scale-110\"\r\n        >\r\n          <TrendingUp className=\"w-6 h-6\" />\r\n          {events.length > 0 && (\r\n            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-[#d9534f] rounded-full text-[10px] font-bold flex items-center justify-center\">\r\n              {events.length}\r\n            </span>\r\n          )}\r\n        </button>\r\n      )}\r\n\r\n      {/* Feed Window */}\r\n      {isOpen && (\r\n        <div className={`fixed bottom-24 right-6 z-50 w-full md:w-96 ${isMinimized ? 'h-14' : 'h-[500px]'} bg-[#0f0f0f] border border-[#333] shadow-2xl flex flex-col transition-all rounded-lg overflow-hidden`}>\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-3 bg-[#1a1a1a] border-b border-[#333]\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <TrendingUp className=\"w-4 h-4 text-warning\" />\r\n              <span className=\"text-sm font-bold text-[#fff] uppercase tracking-wider\">\r\n                Live Feed\r\n              </span>\r\n              <span className=\"text-[10px] text-success\">● LIVE</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                onClick={() => setIsMinimized(!isMinimized)}\r\n                className=\"p-1 hover:bg-[#2a2a2a] rounded transition-colors\"\r\n              >\r\n                <Minus className=\"w-4 h-4 text-[#888]\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"p-1 hover:bg-[#2a2a2a] rounded transition-colors\"\r\n              >\r\n                <X className=\"w-4 h-4 text-[#888]\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Events */}\r\n          {!isMinimized && (\r\n            <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\r\n              {events.length === 0 ? (\r\n                <p className=\"text-[#888] text-xs text-center py-8\">\r\n                  📰 No recent activity\r\n                </p>\r\n              ) : (\r\n                events.map((event) => (\r\n                  <div\r\n                    key={event.id}\r\n                    className=\"flex items-start gap-2 p-2 bg-[#1a1a1a] border border-[#2a2a2a] hover:border-[#333] transition-colors rounded\"\r\n                  >\r\n                    <span className=\"text-lg\">{getEventIcon(event.type)}</span>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"text-[10px] text-[#d0d0d0] break-words leading-tight\">\r\n                        {event.message}\r\n                      </p>\r\n                      <p className=\"text-[8px] text-[#666] mt-1\">\r\n                        {formatTime(event.createdAt)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2006, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Montech.DESKTOP-HFD37TP/Desktop/life-crime-game/app/dashboard/layout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useCharacterStore } from '@/lib/character-store'\r\nimport { Sidebar } from '@/components/dashboard/Sidebar'\r\nimport { TopBar } from '@/components/dashboard/TopBar'\r\nimport { FloatingChat } from '@/components/dashboard/FloatingChat'\r\nimport { FloatingFeed } from '@/components/dashboard/FloatingFeed'\r\nimport type { User } from '@supabase/supabase-js'\r\n\r\nexport default function DashboardLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode\r\n}) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const router = useRouter()\r\n  const supabase = createClient()\r\n  const { fetchCharacter, character } = useCharacterStore()\r\n\r\n  useEffect(() => {\r\n    let mounted = true\r\n\r\n    const checkAuth = async () => {\r\n      try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        \r\n        if (!mounted) return\r\n        \r\n        if (!user) {\r\n          router.push('/login')\r\n          return\r\n        }\r\n\r\n        setUser(user)\r\n\r\n        // Fetch character tylko raz\r\n        if (!character) {\r\n          await fetchCharacter()\r\n          \r\n          // Check if character was created\r\n          setTimeout(async () => {\r\n            if (!mounted) return\r\n            \r\n            const currentState = useCharacterStore.getState()\r\n            \r\n            if (!currentState.character) {\r\n              console.log('🎮 Creating new character...')\r\n              \r\n              const response = await fetch('/api/character', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                  userId: user.id,\r\n                  name: 'Player'\r\n                })\r\n              })\r\n\r\n              if (response.ok) {\r\n                await fetchCharacter()\r\n              }\r\n            }\r\n            \r\n            if (mounted) {\r\n              setIsLoading(false)\r\n            }\r\n          }, 500)\r\n        } else {\r\n          setIsLoading(false)\r\n        }\r\n      } catch (error) {\r\n        console.error('Auth error:', error)\r\n        if (mounted) {\r\n          setIsLoading(false)\r\n        }\r\n      }\r\n    }\r\n\r\n    checkAuth()\r\n\r\n    // Auth state listener\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (!mounted) return\r\n        \r\n        if (event === 'SIGNED_OUT') {\r\n          router.push('/login')\r\n        } else if (event === 'SIGNED_IN' && session?.user) {\r\n          setUser(session.user)\r\n        }\r\n      }\r\n    )\r\n\r\n    return () => {\r\n      mounted = false\r\n      subscription.unsubscribe()\r\n    }\r\n  }, []) // TYLKO PUSTY ARRAY!\r\n\r\n  if (isLoading || !user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-[#0f0f0f]\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-2 border-solid border-[#5cb85c] border-r-transparent mb-4\"></div>\r\n          <p className=\"text-[#888] text-xs uppercase tracking-wider\">Loading your empire...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!character) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-[#0f0f0f]\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-2 border-solid border-[#5cb85c] border-r-transparent mb-4\"></div>\r\n          <p className=\"text-[#888] text-xs uppercase tracking-wider\">Setting up your character...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-[#0f0f0f] overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden lg:block desktop-sidebar\">\r\n        <Sidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        {/* Top Bar */}\r\n        <TopBar />\r\n\r\n        {/* Page Content */}\r\n        <main className=\"flex-1 overflow-y-auto p-4 md:p-6 bg-[#0f0f0f]\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n\r\n      {/* Floating Widgets */}\r\n      <FloatingChat />\r\n      <FloatingFeed />\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAYe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oWAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,oWAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,kSAAS;IACxB,MAAM,WAAW,IAAA,6KAAY;IAC7B,MAAM,EAAE,cAAc,EAAE,SAAS,EAAE,GAAG,IAAA,kLAAiB;IAEvD,IAAA,qWAAS,EAAC;QACR,IAAI,UAAU;QAEd,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBAEtD,IAAI,CAAC,SAAS;gBAEd,IAAI,CAAC,MAAM;oBACT,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,QAAQ;gBAER,4BAA4B;gBAC5B,IAAI,CAAC,WAAW;oBACd,MAAM;oBAEN,iCAAiC;oBACjC,WAAW;wBACT,IAAI,CAAC,SAAS;wBAEd,MAAM,eAAe,kLAAiB,CAAC,QAAQ;wBAE/C,IAAI,CAAC,aAAa,SAAS,EAAE;4BAC3B,QAAQ,GAAG,CAAC;4BAEZ,MAAM,WAAW,MAAM,MAAM,kBAAkB;gCAC7C,QAAQ;gCACR,SAAS;oCAAE,gBAAgB;gCAAmB;gCAC9C,MAAM,KAAK,SAAS,CAAC;oCACnB,QAAQ,KAAK,EAAE;oCACf,MAAM;gCACR;4BACF;4BAEA,IAAI,SAAS,EAAE,EAAE;gCACf,MAAM;4BACR;wBACF;wBAEA,IAAI,SAAS;4BACX,aAAa;wBACf;oBACF,GAAG;gBACL,OAAO;oBACL,aAAa;gBACf;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,eAAe;gBAC7B,IAAI,SAAS;oBACX,aAAa;gBACf;YACF;QACF;QAEA;QAEA,sBAAsB;QACtB,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAChE,OAAO,OAAO;YACZ,IAAI,CAAC,SAAS;YAEd,IAAI,UAAU,cAAc;gBAC1B,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,UAAU,eAAe,SAAS,MAAM;gBACjD,QAAQ,QAAQ,IAAI;YACtB;QACF;QAGF,OAAO;YACL,UAAU;YACV,aAAa,WAAW;QAC1B;IACF,GAAG,EAAE,GAAE,qBAAqB;IAE5B,IAAI,aAAa,CAAC,MAAM;QACtB,qBACE,iYAAC;YAAI,WAAU;sBACb,cAAA,iYAAC;gBAAI,WAAU;;kCACb,iYAAC;wBAAI,WAAU;;;;;;kCACf,iYAAC;wBAAE,WAAU;kCAA+C;;;;;;;;;;;;;;;;;IAIpE;IAEA,IAAI,CAAC,WAAW;QACd,qBACE,iYAAC;YAAI,WAAU;sBACb,cAAA,iYAAC;gBAAI,WAAU;;kCACb,iYAAC;wBAAI,WAAU;;;;;;kCACf,iYAAC;wBAAE,WAAU;kCAA+C;;;;;;;;;;;;;;;;;IAIpE;IAEA,qBACE,iYAAC;QAAI,WAAU;;0BAEb,iYAAC;gBAAM,WAAU;0BACf,cAAA,iYAAC,kLAAO;;;;;;;;;;0BAIV,iYAAC;gBAAI,WAAU;;kCAEb,iYAAC,gLAAM;;;;;kCAGP,iYAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;0BAKL,iYAAC,4LAAY;;;;;0BACb,iYAAC,4LAAY;;;;;;;;;;;AAGnB","debugId":null}}]
}